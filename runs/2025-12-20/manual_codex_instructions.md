# Manual Codex Instructions - 2025-12-20 - ch001

> NOTE: `codex` CLI not found, so this run cannot auto-generate artifacts.
> Use the VSCode Codex extension and follow the steps below in order.
> Output paths must match exactly (do not rename or move).

## Run Targets

- chapter_id: `ch001`
- target_words: `2500`
- total_chapters: 80

## Required Outputs (paths)

- `runs/2025-12-20/chapter_plan.md`
- `manuscript/ch001.md`
- `recap/chapter_summaries/ch001.md`
- `recap/rolling_recap.md`
- `state/state_patch.json` (JSON object, delta only; MUST include `meta.current_chapter: "ch001"`)
- `runs/2025-12-20/changelog.md`
- `runs/2025-12-20/qa_report.md` (generated by Step 4)

## Step 1 - Chapter Plan

Provide these files as context:
- `AGENTS.md`
- `runs/2025-12-20/brief.md`
- `runs/2025-12-20/context_pack.md`
- `prompts/roles/plot_architect.md`
- `prompts/roles/chapter_planner.md`

Write:
- `runs/2025-12-20/chapter_plan.md`

## Step 2 - Draft + Line Edit

Provide these files as context:
- `runs/2025-12-20/chapter_plan.md`
- `runs/2025-12-20/context_pack.md`
- `canon/style/style_guide.md`
- `prompts/roles/drafter.md`
- `prompts/roles/line_editor.md`

Write:
- `manuscript/ch001.md` (first line must be `# ch001`)

## Step 3 - Summary + Rolling Recap + State Patch (Archivist)

Provide these files as context:
- `manuscript/ch001.md`
- `runs/2025-12-20/chapter_plan.md`
- `state/current_state.json`
- `prompts/roles/archivist.md`

Write:
- `recap/chapter_summaries/ch001.md`
- `recap/rolling_recap.md`
- `state/state_patch.json` (JSON object; delta only; `meta.current_chapter` must be string "ch001")
- `runs/2025-12-20/changelog.md`

## Step 4 - Run QA + Merge (PASS only)

From repo root:

```bash
python tools/continuity_checks.py --date 2025-12-20 --chapter ch001
```

This generates/updates `runs/2025-12-20/qa_report.md` (first line `QA_RESULT: PASS/FAIL`).

If `QA_RESULT: PASS`, then run:

```bash
python tools/merge_state_patch.py --date 2025-12-20
```

